class Solution {
    public List<String> restoreIpAddresses(String s) {
        List<String> list = new ArrayList();
        backtrack(list, "", s, 0, 0);
        return list;
    }
    public void backtrack(List<String> list, String sublist, String s, int start, int count){
        if(count>4) return;
        if(count==4 && start==s.length()){
            list.add(sublist);
            return;
        }
        for(int i=1;i<4;i++){
            if(start+i>s.length()) break;
            String key = s.substring(start,start+i);
            if ((key.startsWith("0") && key.length()>1) || (i==3 && Integer.parseInt(key) >= 256)) continue;
            backtrack(list, sublist+key+((count==3)?"":"."), s, start+i, count+1);
        }
    }
}
